<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Portal
    </title>
    <link rel="stylesheet" href="styles.css">
</head>


<body class="lang-en">
    <!-- Fondo animado de estrellas -->
    <div class="stars" id="starsContainer"></div>
    <video id="video-background" autoplay muted loop playsinline>
        <source src="assets/videofondoingles.mp4" type="video/mp4">
    </video>
    <!-- Contenedor principal -->
    <div class="container">
        <!-- Secci√≥n del t√≠tulo -->
        <div class="title-section">
            <h1 class="title">üåü Space Portal </Portal> üåü</h1>
            <p class="subtitle">Explore the wonderful mysteries of space weather</p>
        </div>

        <!-- Contenedor del c√≠rculo principal (sin rotaci√≥n) -->
        <!-- Contenedor del c√≠rculo principal (sin rotaci√≥n) -->
        <div class="circular-container">
            <div class="main-circle" id="mainCircle">

                <!-- COLUMNA IZQUIERDA: 2 c√≠rculos -->
                <div class="left-circles">
                    <!-- Secci√≥n 1: Cuento (arriba) -->
                    <div class="section-circle section-1 active" data-section="1" onclick="selectSection(1)">
                        <div class="section-content">
                            <div class="section-icon">üìñ</div>
                            <h3>Story</h3>
                        </div>
                    </div>

                    <!-- Secci√≥n 2: Flashcards (abajo) -->
                    <div class="section-circle section-2" data-section="2" onclick="selectSection(2)">
                        <div class="section-content">
                            <div class="section-icon">üé¥</div>
                            <h3>Flashcards</h3>
                            <a href="flashcards_english.html" class="section-link"></a>
                        </div>
                    </div>
                </div>

                <div class="center-image main-highlight" id="centerImage" <div class="center-placeholder">
                    <div class="placeholder-icon">üåé</div>
                </div>
            </div>

            <!-- COLUMNA DERECHA: 3 c√≠rculos -->
            <div class="right-circles">
                <!-- Secci√≥n 3: Configuraci√≥n (arriba) -->
                <div class="section-circle section-3" data-section="3" onclick="selectSection(3)">
                    <div class="section-content">
                        <div class="section-icon">‚öôÔ∏è</div>
                        <h3>Settings</h3>
                    </div>
                </div>

                <!-- Secci√≥n 4: Material de Inclusi√≥n (medio) -->
                <div class="section-circle section-4" data-section="4" onclick="selectSection(4)">
                    <div class="section-content">
                        <div class="section-icon">üåç</div>
                        <h3>Inclusive
                            Logbook</h3>
                    </div>
                </div>

                <!-- Secci√≥n 5: Datos Curiosos (abajo) -->
                <div class="section-circle section-5" data-section="5" onclick="selectSection(5)">
                    <div class="section-content">
                        <div class="section-icon">‚òÅÔ∏è</div>
                        <h3>Curious
                            Facts
                        </h3>
                        <a href="datoscuriosos_english.html" class="section-link"></a>
                    </div>
                </div>
            </div>

        </div>

        <!-- Controles de navegaci√≥n -->
        <div class="navigation-controls">
            <button class="nav-btn nav-prev" onclick="previousSection()">‚ùÆ</button>
            <button class="nav-btn nav-next" onclick="nextSection()">‚ùØ</button>
        </div>

        <!-- Indicadores de secci√≥n -->
        <div class="section-indicators">
            <span class="indicator active" data-section="1" onclick="goToSection(1)"></span>
            <span class="indicator" data-section="2" onclick="goToSection(2)"></span>
            <span class="indicator" data-section="3" onclick="goToSection(3)"></span>
            <span class="indicator" data-section="4" onclick="goToSection(4)"></span>
            <span class="indicator" data-section="5" onclick="goToSection(5)"></span>
        </div>
    </div>

    <!-- Modal de Informaci√≥n de Secci√≥n -->
    <div class="section-modal" id="sectionModal">
        <div class="modal-overlay" onclick="closeSectionModal()"></div>
        <div class="modal-content section-modal-content">
            <div class="modal-header">
                <h3 id="sectionModalTitle">T√≠tulo de Secci√≥n</h3>
                <button class="close-btn" onclick="closeSectionModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p id="sectionModalContent">Contenido de la secci√≥n...</p>
                <div id="sectionModalActions"></div>
            </div>
        </div>
    </div>

    <!-- Modal de Material de Inclusi√≥n -->
    <div class="inclusion-modal" id="inclusionModal">
        <div class="modal-overlay" onclick="closeInclusionModal()"></div>
        <div class="modal-content inclusion-modal-content">
            <div class="modal-header">
                <h3>üåç Inclusive Logbook</h3>
                <button class="close-btn" onclick="closeInclusionModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="inclusion-buttons">
                    <button class="inclusion-btn" onclick="alert('Funcionalidad de Lenguaje Braille pr√≥ximamente')">
                        <div class="icon">‚†É</div>
                        <div class="text">Braille Language</div>
                    </button>
                    <a href="glosario_english.html" class="inclusion-btn">
                        <div class="icon">üëã</div>
                        <div class="text">Sign Language</div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- Modal de Configuraci√≥n de Idioma -->
    <div class="config-modal" id="configModal">
        <div class="modal-overlay" onclick="closeConfigModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>üåç Language Configuration</h3>
                <button class="close-btn" onclick="closeConfigModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="language-selector">
                    <div class="language-buttons">
                        <button class="lang-btn active" data-lang="en"> <!-- ‚úÖ Ingl√©s activo -->
                            <span class="flag">üá∫üá∏</span>
                            <span class="lang-text">English</span>
                        </button>
                        <button class="lang-btn" data-lang="es" onclick="showLanguageWarning('es')">
                            <span class="flag">üá™üá∏</span>
                            <span class="lang-text">Spanish</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Advertencia de Idioma -->
    <div class="warning-modal" id="languageWarningModal">
        <div class="modal-overlay" onclick="closeLanguageWarning()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ö†Ô∏è Language Change Warning</h3>
            </div>
            <div class="modal-body">
                <p id="warningMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeLanguageWarning()">Cancel</button>
                <button class="btn-confirm" id="confirmButton" onclick="confirmLanguageChange()">Continue</button>
            </div>
        </div>
    </div>

    <script>
        /*
        ================================================
        PORTAL ESPACIAL - JAVASCRIPT
        ================================================
        */

        let currentSection = 1;
        let totalSections = 5;
        let pendingLanguage = null;

        // Contenido de cada secci√≥n para los modales
        const sectionData = {
            1: {
                title: "Story",
                content: "",
                buttons: [
                    { text: "Read Story", link: "cuento_parte1.html", icon: "üìñ" },
                    { text: "View Illustrated Version", link: "cuento_ilustrado.html", icon: "üé®" }
                ],
                color: "#4fc3f7"
            },
            2: {
                title: "Flashcards Espaciales",
                content: "Aprende datos fascinantes sobre el universo con nuestras tarjetas interactivas. Perfecto para expandir tu conocimiento sobre el cosmos.",
                link: "flashcards_english.html",
                linkText: "Explorar Flashcards",
                color: "#e1bee7"
            },
            3: {
                title: "Settings",
                content: "Customize your experience on the Space Portal. Change the language and adjust the preferences according to your needs.",
                link: null,
                action: "openConfigModal",
                linkText: "Open Settings",
                color: "#ff9800"
            },
            4: {
                title: "Inclusion Material",
                content: "",
                link: null,
                action: "openInclusionModal",
                linkText: "Ver Opciones",
                color: "#ffc107"
            },
            5: {
                title: "Curious Facts",
                content: "Discover amazing facts about stellar weather and space meteorological phenomena. Get ready to be amazed!",
                link: "datoscuriosos_english.html",
                linkText: "Did you know?",
                color: "#4caf50"
            }
        };

        // ===== FUNCIONES DE INICIALIZACI√ìN =====
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                initializePortal();
                createStars();
                setupEventListeners();
                loadLanguagePreference();
            }, 100);
        });

        function initializePortal() {
            setActiveSection(currentSection);
            checkCustomImage();
            console.log('Portal Espacial inicializado');
        }

        function checkCustomImage() {
            const centerImg = document.getElementById('centerImg');
            const placeholder = document.querySelector('.center-placeholder');

            if (centerImg && placeholder) {
                centerImg.onload = function () {
                    console.log('‚úÖ Imagen cargada exitosamente');
                    centerImg.style.display = 'block';
                    placeholder.style.display = 'none';
                };

                centerImg.onerror = function () {
                    console.log('‚ùå Error cargando imagen, mostrando placeholder');
                    centerImg.style.display = 'none';
                    placeholder.style.display = 'flex';
                };

                if (centerImg.complete && centerImg.naturalWidth > 0) {
                    centerImg.style.display = 'block';
                    placeholder.style.display = 'none';
                } else if (centerImg.complete) {
                    centerImg.style.display = 'none';
                    placeholder.style.display = 'flex';
                }
            }
        }

        // ===== NAVEGACI√ìN ENTRE SECCIONES =====

        function previousSection() {
            currentSection = currentSection === 1 ? totalSections : currentSection - 1;
            setActiveSection(currentSection);
        }

        function nextSection() {
            currentSection = currentSection === totalSections ? 1 : currentSection + 1;
            setActiveSection(currentSection);
        }

        function goToSection(sectionNumber) {
            currentSection = sectionNumber;
            setActiveSection(currentSection);
        }

        function selectSection(sectionNumber) {
            if (sectionNumber === 4) {
                openInclusionModal();
            } else {
                openSectionModal(sectionNumber);
            }

            if (sectionNumber !== currentSection) {
                goToSection(sectionNumber);
            }
        }

        function setActiveSection(sectionNumber) {
            document.querySelectorAll('.section-circle').forEach(section => {
                section.classList.remove('active');
            });

            document.querySelectorAll('.indicator').forEach(indicator => {
                indicator.classList.remove('active');
            });

            const activeSection = document.querySelector(`.section-${sectionNumber}`);
            const activeIndicator = document.querySelector(`.indicator[data-section="${sectionNumber}"]`);

            if (activeSection) {
                activeSection.classList.add('active');
            }

            if (activeIndicator) {
                activeIndicator.classList.add('active');
            }
        }

        // ===== GESTI√ìN DE MODALES =====

        function openSectionModal(sectionNumber) {
            const modal = document.getElementById('sectionModal');
            const title = document.getElementById('sectionModalTitle');
            const content = document.getElementById('sectionModalContent');
            const actions = document.getElementById('sectionModalActions');
            const data = sectionData[sectionNumber];

            if (!modal || !data) return;

            title.textContent = data.title;
            title.style.color = data.color;
            content.textContent = data.content;

            let actionsHtml = '';

            // Si tiene botones personalizados (como en el cuento)
            if (data.buttons && data.buttons.length > 0) {
                actionsHtml = '<div class="story-buttons">';
                data.buttons.forEach(button => {
                    actionsHtml += `
                        <a href="${button.link}" class="story-btn">
                            <span class="btn-icon">${button.icon}</span>
                            <span class="btn-text">${button.text}</span>
                        </a>
                    `;
                });
                actionsHtml += '</div>';
            }
            // Si tiene un enlace simple
            else if (data.link) {
                actionsHtml = `<a href="${data.link}" class="modal-action-btn">${data.linkText || 'Ver m√°s'}</a>`;
            }
            // Si tiene una acci√≥n (como abrir otro modal)
            else if (data.linkText && data.action) {
                actionsHtml = `<button class="modal-action-btn" onclick="${data.action}(); closeSectionModal();">${data.linkText}</button>`;
            }

            actions.innerHTML = actionsHtml;

            modal.classList.add('show');
            document.body.classList.add('modal-open');
        }

        function closeSectionModal() {
            const modal = document.getElementById('sectionModal');
            if (modal) {
                modal.classList.remove('show');
                document.body.classList.remove('modal-open');
            }
        }

        function openInclusionModal() {
            const modal = document.getElementById('inclusionModal');
            if (modal) {
                modal.classList.add('show');
                document.body.classList.add('modal-open');
            }
        }

        function closeInclusionModal() {
            const modal = document.getElementById('inclusionModal');
            if (modal) {
                modal.classList.remove('show');
                document.body.classList.remove('modal-open');
            }
        }

        // ===== EFECTOS VISUALES DE ESTRELLAS =====

        function createStars() {
            const starsContainer = document.getElementById('starsContainer');
            if (!starsContainer) return;

            const numStars = 100;

            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }

            setInterval(createShootingStar, 3000);
        }

        function createShootingStar() {
            const starsContainer = document.getElementById('starsContainer');
            if (!starsContainer) return;

            const shootingStar = document.createElement('div');
            shootingStar.className = 'shooting-star';
            shootingStar.style.top = Math.random() * 50 + '%';
            shootingStar.style.left = '-100px';
            starsContainer.appendChild(shootingStar);

            setTimeout(() => {
                if (shootingStar.parentNode) {
                    shootingStar.remove();
                }
            }, 4000);
        }

        // ===== SISTEMA DE CONFIGURACI√ìN E IDIOMAS =====

        function openConfigModal() {
            const modal = document.getElementById('configModal');
            if (modal) {
                modal.classList.add('show');
                document.body.classList.add('modal-open');
            }
        }

        function closeConfigModal() {
            const modal = document.getElementById('configModal');
            if (modal) {
                modal.classList.remove('show');
                document.body.classList.remove('modal-open');
            }
        }

        function showLanguageWarning(targetLang) {
            const modal = document.getElementById('languageWarningModal');
            const warningMessage = document.getElementById('warningMessage');

            pendingLanguage = targetLang;

            if (targetLang === 'es') {
                warningMessage.textContent = "Please note that when switching to Spanish, only Colombian Sign Language will be used in the sign language section.";
            } else if (targetLang === 'en') {
                warningMessage.textContent = "Please note that when switching to English, only Colombian Sign Language will be used in the sign language section.";
            }

            modal.classList.add('show');
            document.body.classList.add('modal-open');
        }

        function closeLanguageWarning() {
            const modal = document.getElementById('languageWarningModal');
            modal.classList.remove('show');
            document.body.classList.remove('modal-open');
            pendingLanguage = null;
        }

        function confirmLanguageChange() {
            if (pendingLanguage) {
                switchLanguage(pendingLanguage);
                closeLanguageWarning();
                closeConfigModal();
            }
        }

        function switchLanguage(lang) {
            localStorage.setItem('portal-language', lang);
            console.log(`Cambiando idioma a: ${lang}`);

            if (lang === 'es') {
                window.location.href = 'index_spanish.html';  // ‚úÖ Redirige a espa√±ol
            } else if (lang === 'en') {
                updateLanguageInterface('en');
            }
        }

        function updateLanguageInterface(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });
        }

        function loadLanguagePreference() {
            const savedLang = localStorage.getItem('portal-language') || 'en';  // ‚úÖ 'en' por defecto
            updateLanguageInterface(savedLang);
        }

        // ===== CONTROLES Y EVENT LISTENERS =====

        function setupEventListeners() {
            document.addEventListener('keydown', (e) => {
                switch (e.key) {
                    case 'ArrowLeft':
                        previousSection();
                        break;
                    case 'ArrowRight':
                        nextSection();
                        break;
                    case 'Escape':
                        closeConfigModal();
                        closeLanguageWarning();
                        closeSectionModal();
                        closeInclusionModal();
                        break;
                    case '1':
                    case '2':
                    case '3':
                    case '4':
                    case '5':
                        goToSection(parseInt(e.key));
                        break;
                }
            });

            let startX = 0;
            let endX = 0;

            document.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
            });

            document.addEventListener('touchend', (e) => {
                endX = e.changedTouches[0].clientX;
                handleSwipe();
            });

            function handleSwipe() {
                const swipeThreshold = 50;
                const diffX = startX - endX;

                if (Math.abs(diffX) > swipeThreshold) {
                    if (diffX > 0) {
                        nextSection();
                    } else {
                        previousSection();
                    }
                }
            }

            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal-overlay')) {
                    closeConfigModal();
                    closeLanguageWarning();
                    closeSectionModal();
                    closeInclusionModal();
                }
            });
        }

        // Exponer funciones globales
        window.previousSection = previousSection;
        window.nextSection = nextSection;
        window.selectSection = selectSection;
        window.goToSection = goToSection;
        window.openSectionModal = openSectionModal;
        window.closeSectionModal = closeSectionModal;
        window.openInclusionModal = openInclusionModal;
        window.closeInclusionModal = closeInclusionModal;
        window.openConfigModal = openConfigModal;
        window.closeConfigModal = closeConfigModal;
        window.showLanguageWarning = showLanguageWarning;
        window.closeLanguageWarning = closeLanguageWarning;
        window.confirmLanguageChange = confirmLanguageChange;

    </script>
</body>

</html>