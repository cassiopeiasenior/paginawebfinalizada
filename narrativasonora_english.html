<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sound Narrative</title>
    <link rel="stylesheet" href="narrativasonora_styles.css">
</head>

<body>
    <!-- Fondo de estrellas -->
    <div class="stars" id="starsContainer"></div>

    <!-- Bot√≥n de regreso -->
    <a href="index.html" class="back-btn" title="Volver al Portal">
        üè†
    </a>

    <!-- Contenedor principal -->
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üîä Sound Narrative üîä</h1>
            <p>Explora el universo a trav√©s del sonido. Descubre t√©rminos astron√≥micos explicados de manera accesible.
            </p>

            <!-- Bot√≥n de instrucciones -->
            <div class="instructions-container">
                <button class="audio-btn instructions-btn" onclick="playInstructions()" id="instructionsBtn">
                    <span class="play-icon">‚ñ∂</span>
                </button>
                <span class="instructions-label">Instructions</span>
            </div>
        </div>

        <!-- Grid de narrativas -->
        <div class="narrative-grid">

            <!-- Narrativa 1 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover1.mp3">
                <h3 class="narrative-title">Atmosphere</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(0)" id="audioBtn0">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio0" src="assets/narrativasonora/audio/audioatmosferaingles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 2 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover2.mp3">
                <h3 class="narrative-title">Aurora Boreal</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(1)" id="audioBtn1">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio1" src="assets/narrativasonora/audio/audioauroraingles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 3 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover3.mp3">
                <h3 class="narrative-title">Space Weather</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(2)" id="audioBtn2">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio2" src="assets/narrativasonora/audio/audioclimaespacialingles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 4 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover4.mp3">
                <h3 class="narrative-title">Coronal Mass Eyection</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(3)" id="audioBtn3">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio3" src="assets/narrativasonora/audio/audioeyeccioningles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 5 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover5.mp3">
                <h3 class="narrative-title">Heliosphere</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(4)" id="audioBtn4">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio4" src="assets/narrativasonora/audio/audioheliosferaingles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 6 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover6.mp3">
                <h3 class="narrative-title">Orbit</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(5)" id="audioBtn5">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio5" src="assets/narrativasonora/audio/audioorbitaingles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 7 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover7.mp3">
                <h3 class="narrative-title">Solar Flare</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(6)" id="audioBtn6">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio6" src="assets/narrativasonora/audio/audiollamaradasolaringles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 8 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover8.mp3">
                <h3 class="narrative-title">Solar Spot</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(7)" id="audioBtn7">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio7" src="assets/narrativasonora/audio/audiomanchassolaringles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 9 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover9.mp3">
                <h3 class="narrative-title">Radiation</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(8)" id="audioBtn8">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio8" src="assets/narrativasonora/audio/audioradiacioningles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 10 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover10.mp3">
                <h3 class="narrative-title">Satellite</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(9)" id="audioBtn9">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio9" src="assets/narrativasonora/audio/audiosateliteingles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 11 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover11.mp3">
                <h3 class="narrative-title">Solar Storm</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(10)" id="audioBtn10">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio10" src="assets/narrativasonora/audio/audiotormentaingles.m4a"></audio>
                </div>
            </div>

            <!-- Narrativa 12 -->
            <div class="narrative-card" data-hover-audio="assets/narrativasonora/audio/hover12.mp3">
                <h3 class="narrative-title">Solar Wind</h3>
                <div class="audio-container">
                    <button class="audio-btn" onclick="playAudio(11)" id="audioBtn11">
                        <span class="play-icon">‚ñ∂</span>
                    </button>
                    <audio id="audio11" src="assets/narrativasonora/audio/audiovientoingles.m4a"></audio>
                </div>
            </div>

        </div>
    </div>

    <script>
        // ===== INICIALIZACI√ìN =====
        document.addEventListener('DOMContentLoaded', () => {
            createStars();
            initializeAudioPlayers();
            addHoverSounds();
        });

        // ===== CREACI√ìN DE ESTRELLAS =====
        function createStars() {
            const starsContainer = document.getElementById('starsContainer');
            const numStars = 150;

            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        // ===== VARIABLES GLOBALES DE AUDIO =====
        let currentAudio = null;
        let currentBtn = null;
        let instructionsAudio = null;
        let hoverSounds = {};

        // ===== INICIALIZAR REPRODUCTORES =====
        function initializeAudioPlayers() {
            // Crear elemento de audio para instrucciones
            instructionsAudio = new Audio('assets/narrativasonora/audio/audiointroduccioningles.m4a');

            // Agregar listeners a todos los audios
            for (let i = 0; i < 12; i++) {
                const audio = document.getElementById(`audio${i}`);
                const btn = document.getElementById(`audioBtn${i}`);

                audio.addEventListener('ended', () => {
                    btn.innerHTML = '<span class="play-icon">‚ñ∂</span>';
                    btn.classList.remove('playing');
                });
            }

            // Listener para audio de instrucciones
            instructionsAudio.addEventListener('ended', () => {
                const btn = document.getElementById('instructionsBtn');
                btn.innerHTML = '<span class="play-icon">‚ñ∂</span>';
                btn.classList.remove('playing');
            });
        }

        // ===== AGREGAR SONIDOS DE HOVER =====
        function addHoverSounds() {
            // Agregar hover a todas las tarjetas con su propio audio
            const narrativeCards = document.querySelectorAll('.narrative-card');

            narrativeCards.forEach((card, index) => {
                const hoverAudioSrc = card.getAttribute('data-hover-audio');

                // Crear un objeto Audio para cada tarjeta
                if (hoverAudioSrc) {
                    hoverSounds[index] = new Audio(hoverAudioSrc);
                    hoverSounds[index].volume = 0.3;
                }

                card.addEventListener('mouseenter', () => {
                    if (hoverSounds[index]) {
                        playHoverSound(index);
                    }
                });
            });

            // Agregar hover al bot√≥n de instrucciones (puedes usar un hover espec√≠fico)
            const instructionsBtn = document.getElementById('instructionsBtn');
            hoverSounds['instructions'] = new Audio('assets/narrativasonora/audio/hoverinstrucciones.mp3');
            hoverSounds['instructions'].volume = 0.3;

            instructionsBtn.addEventListener('mouseenter', () => {
                playHoverSound('instructions');
            });

            // Agregar hover al bot√≥n de regreso
            const backBtn = document.querySelector('.back-btn');
            hoverSounds['back'] = new Audio('assets/narrativasonora/audio/hoverback.mp3');
            hoverSounds['back'].volume = 0.3;

            backBtn.addEventListener('mouseenter', () => {
                playHoverSound('back');
            });
        }

        // ===== REPRODUCIR SONIDO DE HOVER =====
        function playHoverSound(key) {
            if (hoverSounds[key]) {
                hoverSounds[key].currentTime = 0;
                hoverSounds[key].play().catch(error => {
                    console.log('No se pudo reproducir el sonido hover:', error);
                });
            }
        }

        // ===== REPRODUCIR AUDIO DE INSTRUCCIONES =====
        function playInstructions() {
            const btn = document.getElementById('instructionsBtn');

            // Detener cualquier audio que est√© reproduci√©ndose
            if (currentAudio && !currentAudio.paused) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                if (currentBtn) {
                    currentBtn.innerHTML = '<span class="play-icon">‚ñ∂</span>';
                    currentBtn.classList.remove('playing');
                }
            }

            // Toggle del audio de instrucciones
            if (instructionsAudio.paused) {
                instructionsAudio.play();
                btn.innerHTML = '<span class="pause-icon">‚è∏</span>';
                btn.classList.add('playing');
            } else {
                instructionsAudio.pause();
                instructionsAudio.currentTime = 0;
                btn.innerHTML = '<span class="play-icon">‚ñ∂</span>';
                btn.classList.remove('playing');
            }
        }

        // ===== REPRODUCIR AUDIO DE NARRATIVAS =====
        function playAudio(index) {
            const audio = document.getElementById(`audio${index}`);
            const btn = document.getElementById(`audioBtn${index}`);

            // Detener audio de instrucciones si est√° reproduci√©ndose
            if (instructionsAudio && !instructionsAudio.paused) {
                instructionsAudio.pause();
                instructionsAudio.currentTime = 0;
                const instructionsBtn = document.getElementById('instructionsBtn');
                instructionsBtn.innerHTML = '<span class="play-icon">‚ñ∂</span>';
                instructionsBtn.classList.remove('playing');
            }

            // Si hay un audio reproduci√©ndose diferente, detenerlo
            if (currentAudio && currentAudio !== audio && !currentAudio.paused) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentBtn.innerHTML = '<span class="play-icon">‚ñ∂</span>';
                currentBtn.classList.remove('playing');
            }

            // Toggle del audio actual
            if (audio.paused) {
                audio.play();
                btn.innerHTML = '<span class="pause-icon">‚è∏</span>';
                btn.classList.add('playing');
                currentAudio = audio;
                currentBtn = btn;
            } else {
                audio.pause();
                audio.currentTime = 0;
                btn.innerHTML = '<span class="play-icon">‚ñ∂</span>';
                btn.classList.remove('playing');
                currentAudio = null;
                currentBtn = null;
            }
        }
    </script>
</body>

</html>